function elDialogForm(c){var a=this;var b={"class":"el-dialogform",submit:function(f,g){window.console&&window.console.log&&window.console.log("submit called");g.close()},form:{action:window.location.href,method:"post"},ajaxForm:null,validate:null,spinner:"Loading",tabs:{active:0},tabPrefix:"el-df-tab-",dialog:{title:"dialog",autoOpen:false,modal:true,resizable:false,buttons:{Cancel:function(){a.close()},Ok:function(){a.form.trigger("submit")}}}};this.opts=$.extend(true,b,c,{dialog:{autoOpen:false,close:function(){a.close()}}});if(c&&c.dialog&&c.dialog.buttons&&typeof(c.dialog.buttons)=="object"){this.opts.dialog.buttons=c.dialog.buttons}this.ul=null;this.tabs={};this._table=null;this.dialog=$("<div />").addClass(this.opts["class"]).dialog(this.opts.dialog);this.message=$('<div class="el-dialogform-message rounded-5" />').hide().appendTo(this.dialog);this.error=$('<div class="el-dialogform-error rounded-5" />').hide().appendTo(this.dialog);this.spinner=$('<div class="spinner" />').hide().appendTo(this.dialog);this.content=$('<div class="el-dialogform-content" />').appendTo(this.dialog);this.form=$("<form />").attr(this.opts.form).appendTo(this.content);if(this.opts.submit){this.form.bind("submit",function(d){a.opts.submit(d,a)})}if(this.opts.ajaxForm&&$.fn.ajaxForm){this.form.ajaxForm(this.opts.ajaxForm)}if(this.opts.validate){this.form.validate(this.opts.validate)}this.option=function(d,e){return this.dialog.dialog("option",d,e)};this.showError=function(d,e){this.hideMessage();this.hideSpinner();this.error.html(d).show();e&&this.content.hide();return this};this.hideError=function(){this.error.text("").hide();this.content.show();return this};this.showSpinner=function(d){this.error.hide();this.message.hide();this.content.hide();this.spinner.text(d||this.opts.spinner).show();this.option("buttons",{});return this};this.hideSpinner=function(){this.content.show();this.spinner.hide();return this};this.showMessage=function(d,e){this.hideError();this.hideSpinner();this.message.html(d||"").show();e&&this.content.hide();return this};this.hideMessage=function(){this.message.hide();this.content.show();return this};this.tab=function(e,d){e=this.opts.tabPrefix+e;if(!this.ul){this.ul=$("<ul />").prependTo(this.form)}$("<li />").append($("<a />").attr("href","#"+e).html(d)).appendTo(this.ul);this.tabs[e]={tab:$("<div />").attr("id",e).addClass("tab").appendTo(this.form),table:null};return this};this.table=function(d){d=d&&d.indexOf(this.opts.tabPrefix)==-1?this.opts.tabPrefix+d:d;if(d&&this.tabs&&this.tabs[d]){this.tabs[d].table=$("<table />").appendTo(this.tabs[d].tab)}else{this._table=$("<table />").appendTo(this.form)}return this};this.append=function(g,h,e){h=h?"el-df-tab-"+h:"";if(!g){return this}if(h&&this.tabs[h]){if(e){!this.tabs[h].table&&this.table(h);var f=$("<tr />").appendTo(this.tabs[h].table);if(!$.isArray(g)){f.append($("<td />").append(g))}else{for(var d=0;d<g.length;d++){f.append($("<td />").append(g[d]))}}}else{if(!$.isArray(g)){this.tabs[h].tab.append(g)}else{for(var d=0;d<g.length;d++){this.tabs[h].tab.append(g[d])}}}}else{if(!e){if(!$.isArray(g)){this.form.append(g)}else{for(var d=0;d<g.length;d++){this.form.append(g[d])}}}else{if(!this._table){this.table()}var f=$("<tr />").appendTo(this._table);if(!$.isArray(g)){f.append($("<td />").append(g))}else{for(var d=0;d<g.length;d++){f.append($("<td />").append(g[d]))}}}}return this};this.separator=function(d){d="el-df-tab-"+d;if(this.tabs&&this.tabs[d]){this.tabs[d].tab.append($("<div />").addClass("separator"));this.tabs[d].table&&this.table(d)}else{this.form.append($("<div />").addClass("separator"))}return this};this.open=function(){this.ul&&this.form.tabs(this.opts.tabs);this.form.find(":text").keyup(function(d){if(d.keyCode==13){a.form.submit()}});this.dialog.attr("unselectable","on").dialog("open");this.form.find(":text").eq(0).focus();return this};this.close=function(){this.dialog.dialog("destroy").remove()}};